
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1.6. Lab 6: Frequency Compensation of a Two-Stage OTA &#8212; MOSbius Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '3a_experiments/Lab_6_compensation_two_stage_OTA/two_stage_OTA_PK';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.2. Solutions" href="../solutions.html" />
    <link rel="prev" title="3.1.5. Lab 5: One-stage OTA and Common-Source Amplifier" href="../Lab_5_simple_OTA_and_CS/simple_OTA_CS_PK.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../0_front_matter/intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/die.png" class="logo__image only-light" alt="MOSbius Book - Home"/>
    <script>document.write(`<img src="../../_static/die.png" class="logo__image only-dark" alt="MOSbius Book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../0_front_matter/intro.html">
                    Welcome to the MOSbius Project
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../1_chapter_description/description.html">1. MOSbius Platform for MOS Circuit Labs</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../2_chapter_demonstrations/demonstrations.html">2. Demonstrations with the MOSbius Chip</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../2_chapter_blinky/blinky.html">2.1. First Experiment: Blinky</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_chapter_mosbius_555/mosbius_555.html">2.2. A ‘555’ with MOSbius</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_chapter_ring_oscillator/ring_oscillator.html">2.3. Ring Oscillators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2_chapter_ota/ota_experiments.html">2.4. Operational Transconductance Amplifiers</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../2_iv_characteristics/iv_characteristics.html">2.5. Transistor I-V Characteristics</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../2_iv_characteristics/plotting_i_v_data_sims_nmos.html">Automated nMOS I-V Data vs Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../2_iv_characteristics/plotting_i_v_data_sims_pmos.html">Automated pMOS I-V Data vs Simulations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../experiments.html">3. Lab Experiments Manual</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../labs.html">3.1. Labs</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Lab_1_introduction/introduction_PK.html">3.1.1. Lab 1: Basic Measurements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Lab_2_current_mirrors/current_mirrors_PK.html">3.1.2. Lab 2: Current Mirrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Lab_3_differential_pair_DC/differential_pair_DC_PK.html">3.1.3. Lab 3: Differential Pair DC Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Lab_4_differential_pair_AC/differential_pair_AC_PK.html">3.1.4. Lab 4: Differential Pair AC Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Lab_5_simple_OTA_and_CS/simple_OTA_CS_PK.html">3.1.5. Lab 5: One-stage OTA and Common-Source Amplifier</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">3.1.6. Lab 6: Frequency Compensation of a Two-Stage OTA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../solutions.html">3.2. Solutions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../4_sw_support/MOSbiusTools.html">4. Programming the Chip</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../5_chapter_simulations/LTspice_simulations.html">5. Spice Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../6_discussion/discussion.html">6. Discussion Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../7_ordering/ordering.html">7. How to Order a MOSbius</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../8_mosbius_crew/mosbius_crew.html">8. The MOSbius Crew</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../9_back_matter/acknowledgments.html">9. Acknowledgments</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../10_appendices/appendices.html">10. Appendices</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../10_app_pcb_test/pcb_test.html">10.1. Testing Your MOSbius PCB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../10_chapter_chip_design_details/chip_design_details.html">10.2. MOSbius Chip Design Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../10_app_adalm2000/adalm2000.html">10.3. ADALM2000 Notes</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/peterkinget/MOSbiusBook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/peterkinget/MOSbiusBook/issues/new?title=Issue%20on%20page%20%2F3a_experiments/Lab_6_compensation_two_stage_OTA/two_stage_OTA_PK.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/3a_experiments/Lab_6_compensation_two_stage_OTA/two_stage_OTA_PK.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lab 6: Frequency Compensation of a Two-Stage OTA</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objective">Objective</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preparation">Preparation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#materials">Materials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#experiments">Experiments</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#two-stage-pmos-input-ota-without-compensation">Two-Stage pMOS-input OTA without Compensation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#build-the-test-circuit-and-check-the-bias-point">Build the Test Circuit and Check the Bias Point</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#build-and-characterize-an-input-signal-attenuator">Build and Characterize an Input-Signal Attenuator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oscilloscope-measurements">Oscilloscope Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#network-analyzer-measurements">Network Analyzer Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#measurement-vs-behavioral-model-predictions">Measurement vs. Behavioral-Model Predictions</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-response-measurements">Step Response Measurements</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#two-stage-pmos-input-ota-with-dominant-pole-compensation">Two-Stage pMOS-input OTA with Dominant-Pole Compensation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations">Calculations</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Network Analyzer Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Step Response Measurements</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#two-stage-pmos-input-ota-with-miller-compensation">Two-Stage pMOS-input OTA with Miller Compensation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Calculations</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Network Analyzer Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Step Response Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#rhp-zero-compensation">RHP Zero Compensation</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dominant-pole-vs-miller-compensation">Dominant-Pole vs Miller Compensation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#suggestions">Suggestions</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lab-6-frequency-compensation-of-a-two-stage-ota">
<h1><span class="section-number">3.1.6. </span>Lab 6: Frequency Compensation of a Two-Stage OTA<a class="headerlink" href="#lab-6-frequency-compensation-of-a-two-stage-ota" title="Link to this heading">#</a></h1>
<section id="objective">
<h2>Objective<a class="headerlink" href="#objective" title="Link to this heading">#</a></h2>
<p>In this experiment we build a two-stage OTA using the one-stage PMOS OTA and 4x nMOS common-source stage. We use the behavioral models measured in the <a class="reference internal" href="../Lab_5_simple_OTA_and_CS/simple_OTA_CS_PK.html"><span class="std std-doc">One Stage OTA and Common-Source Amplifier Lab</span></a> to calculate the appropriate compensation capacitors to do a dominant-pole and a Miller compensation. Then the unity-gain closed-loop step responses are checked.</p>
</section>
<section id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Review your course notes on two-stage OTAs and dominant-pole and Miller compensation.</p></li>
<li><p>Review the experiments below and build up an understanding of what you should observe in the measurements. You can consider doing some circuit simulations to get familiar with the biasing and the operation of the amplifiers.</p></li>
<li><p>Review the chip schematic and pin map to find where the relevant components are. In this lab we will use the pMOS one-stage OTA and the 4x nMOS CS transistor and the pMOS current mirror.</p></li>
</ul>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="../../_images/mosbius_OTA_CS1.png"><img alt="../../_images/mosbius_OTA_CS1.png" src="../../_images/mosbius_OTA_CS1.png" style="height: 600px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.10 </span><span class="caption-text">Schematic of the MOSbius chip with one-stage pMOS OTA, the 4x CS transistor and the pMOS current mirror highlighted</span><a class="headerlink" href="#id10" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="materials">
<h2>Materials<a class="headerlink" href="#materials" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>MOSbius Chip &amp; PCB</p></li>
<li><p>Breadboard &amp; Wires</p></li>
<li><p>Resistors: <span class="math notranslate nohighlight">\(100\Omega\)</span> (two), <span class="math notranslate nohighlight">\(100K\Omega\)</span> (two)e</p></li>
<li><p>Signal Capacitors: <span class="math notranslate nohighlight">\(470pF\)</span>, <span class="math notranslate nohighlight">\(47nF\)</span> and <span class="math notranslate nohighlight">\(4.7nF\)</span> or values that are close;</p></li>
<li><p>Bias Capacitors: <span class="math notranslate nohighlight">\(47\mu F\)</span> electrolytic and <span class="math notranslate nohighlight">\(1\mu F\)</span> non-electrolytic</p></li>
<li><p>Potentiometer: <span class="math notranslate nohighlight">\(25K\Omega\)</span></p></li>
<li><p>ADALM2000 Active Learning Module (DC Power Supply, Oscilloscope, Waveform Generator, Network Analyzer)</p></li>
</ul>
</section>
<section id="experiments">
<h2>Experiments<a class="headerlink" href="#experiments" title="Link to this heading">#</a></h2>
<p>The open-loop frequency response of the two-stage OTA is measured and compared with the expected response based on the behavioral models measured in <a class="reference internal" href="../Lab_5_simple_OTA_and_CS/simple_OTA_CS_PK.html"><span class="std std-doc">One Stage OTA and Common-Source Amplifier Lab</span></a>. The unity-gain step responses are reviewed. Then dominant-pole and Miller compensation are applied and the unity-gain step responses are reviewed again.</p>
<section id="two-stage-pmos-input-ota-without-compensation">
<h3>Two-Stage pMOS-input OTA without Compensation<a class="headerlink" href="#two-stage-pmos-input-ota-without-compensation" title="Link to this heading">#</a></h3>
<section id="build-the-test-circuit-and-check-the-bias-point">
<h4>Build the Test Circuit and Check the Bias Point<a class="headerlink" href="#build-the-test-circuit-and-check-the-bias-point" title="Link to this heading">#</a></h4>
<figure class="align-default" id="fig-ota-open-loop-setup">
<a class="reference internal image-reference" href="../../_images/lab6_schematic_man.svg"><img alt="../../_images/lab6_schematic_man.svg" height="400px" src="../../_images/lab6_schematic_man.svg" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.11 </span><span class="caption-text">Test circuit setup to measure the open-loop gain of the two-stage pMOS-input OTA. The input is a one-stage OTA biased with a 2x <span class="math notranslate nohighlight">\(I_{REF}\)</span> current bias; the second stage is a 4x CS nMOS transistor biased with a 4x <span class="math notranslate nohighlight">\(I_{REF}\)</span> current bias. The first and second stage are loaded by <span class="math notranslate nohighlight">\(C_{L1}\)</span> and <span class="math notranslate nohighlight">\(C_{L2}\)</span> respectively. The OTA is placed in negative DC feedback with <span class="math notranslate nohighlight">\(R_2\)</span>, <span class="math notranslate nohighlight">\(R_1\)</span> and <span class="math notranslate nohighlight">\(C_{B1}\)</span> and in AC feedback with <span class="math notranslate nohighlight">\(R_2\)</span>, <span class="math notranslate nohighlight">\(R_1\)</span>. The biasing of the input pin is not shown.</span><a class="headerlink" href="#fig-ota-open-loop-setup" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Build the test circuit:</p>
<ul>
<li><p>The pMOS current mirror is biased using the 25K potentiometer provided on the PCB (close to I_REFP). Connect a current meter across I_REFP with the positive lead on the left and the negative lead on the right side of the header; adjust the potentiometer so <span class="math notranslate nohighlight">\(I_{REF}\)</span> is <span class="math notranslate nohighlight">\(100\mu A\)</span>; replace the current meter with a jumper. The I_REFP header is connected to pin 68 of the MOSbius chip on the PCB. See <em>Testing the Current Bias Potentiometers</em> in the <a class="reference internal" href="../../10_app_pcb_test/pcb_test.html"><span class="doc std std-doc">Appendix on Testing the MOSbius PCB</span></a></p></li>
<li><p>The OTA is internally connected to the current mirror with a 2X tail transistor M7 so it is biased with <span class="math notranslate nohighlight">\(200\mu A\)</span>.</p></li>
<li><p>Use a <span class="math notranslate nohighlight">\(470pF\)</span> capacitor as <span class="math notranslate nohighlight">\(C_{L1}\)</span> and a <span class="math notranslate nohighlight">\(4.7nF\)</span> capacitor as <span class="math notranslate nohighlight">\(C_{L12}\)</span>.</p></li>
<li><p>Use <span class="math notranslate nohighlight">\(R_1 = 100\Omega\)</span> and <span class="math notranslate nohighlight">\(R_2 = 100K\Omega\)</span> and <span class="math notranslate nohighlight">\(C_{B1} = 1\mu F\)</span> (non electrolytic).</p></li>
</ul>
</li>
<li><p>Understand the operation of the OTA in the test circuit:</p>
<ul>
<li><p>Draw a DC equivalent for the circuit and prove to yourself that the OTA is in negative, series-shunt feedback with unity gain for DC (<span class="math notranslate nohighlight">\(\beta = 1\)</span>).</p></li>
<li><p>Draw an AC equivalent for the circuit and prove to yourself that the OTA is in negative, series-shunt feedback with a feedback factor <span class="math notranslate nohighlight">\(\beta\)</span> of <span class="math notranslate nohighlight">\(R_1/(R_1+R_2) = 1/1,001\)</span> for AC signals.</p></li>
<li><p>Study for which frequencies the OTA will be in AC feedback, i.e. where <span class="math notranslate nohighlight">\(\beta = R_1/(R_1+R_2)\)</span>.</p></li>
<li><p>What would happen if we connected <span class="math notranslate nohighlight">\(R_1\)</span> to <span class="math notranslate nohighlight">\(V_{REF}\)</span> directly instead of to <span class="math notranslate nohighlight">\(C_{B1}\)</span>. (Hint: The OTA has a DC offset.)</p></li>
</ul>
</li>
<li><p>Verify the DC bias point:</p>
<ul>
<li><p>Set up your signal generator <em>W1</em> to generate a constant <span class="math notranslate nohighlight">\(1.25V\)</span> reference.</p></li>
<li><p>Apply the 2.5V power supply to the chip and short <em>in</em> to <em>W1</em>.</p></li>
<li><p>Measure and record the various DC node voltages<a class="footnote-reference brackets" href="#scoper" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>: <em>inn (= in)</em>, <em>inp</em>, <em>OTAout</em>, <em>out</em>.</p></li>
<li><p>Review that the voltages make sense.</p>
<ul>
<li><p>If there is a voltage difference between <em>out</em> and <em>inp</em>, then likely there is leakage through <span class="math notranslate nohighlight">\(C_{B1}\)</span>; make sure to use non-electrolytic (possibly smaller) capacitor.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="build-and-characterize-an-input-signal-attenuator">
<h4>Build and Characterize an Input-Signal Attenuator<a class="headerlink" href="#build-and-characterize-an-input-signal-attenuator" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>The signal generator is based on a DAC and it is difficult to generate small signals, say of a few milliVolt. Try it and you will notice that the signal looks like a staircase (after amplification) due to the generator’s DAC finite resolution.</p></li>
<li><p>Next we build an analog 100x attenuator so that we can use a large output signal from the generator but still apply the required small inputs for measuring an OTA with a lot of gain (40dB or more).</p></li>
</ul>
<figure class="align-default" id="id11">
<a class="reference internal image-reference" href="../../_images/lab6_atten_man.svg"><img alt="../../_images/lab6_atten_man.svg" height="150px" src="../../_images/lab6_atten_man.svg" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.12 </span><span class="caption-text">Schematic of the 100x signal attenuator. It attenuates AC signals by 40dB while passing through DC bias.</span><a class="headerlink" href="#id11" title="Link to this image">#</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Build the attenuator circuit:</p>
<ul>
<li><p>Use <span class="math notranslate nohighlight">\(R_{atten1} = 10K\Omega\)</span>, <span class="math notranslate nohighlight">\(R_{atten2} = 100\Omega\)</span>, and <span class="math notranslate nohighlight">\(C_{Bin} = 10\mu F\)</span></p></li>
</ul>
</li>
<li><p>Derive the transfer function for the attenuator across frequency.</p>
<ul>
<li><p>How are DC signals handled by the attenuator circuit?</p></li>
<li><p>How are AC signals handled by the attenuator circuit?</p></li>
<li><p>For which signal frequencies does the circuit act as a 40dB attenuator?</p></li>
</ul>
</li>
<li><p>Measure the attenuator circuit’s frequency response:</p>
<ul>
<li><p>Use the network analyzer to characterize the frequency response of the attenuator.</p>
<ul>
<li><p>Set up the network analyzer with a <span class="math notranslate nohighlight">\(2V\)</span> DC, <span class="math notranslate nohighlight">\(V_{offset}\)</span>, and a <span class="math notranslate nohighlight">\(1V_{p}\)</span> signal, <span class="math notranslate nohighlight">\(V_{signal}\)</span>.</p></li>
<li><p>Find the exact attenuation <span class="math notranslate nohighlight">\(A_{atten}\)</span>, phase shift and frequency range of the attenuator for a close to <span class="math notranslate nohighlight">\(40dB\)</span> signal attenuation.</p></li>
<li><p>Explain what is happening at low frequencies. (Extra) Explain what is happening at high frequencies?</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="oscilloscope-measurements">
<h4>Oscilloscope Measurements<a class="headerlink" href="#oscilloscope-measurements" title="Link to this heading">#</a></h4>
<p>We start with measurements on the oscilloscope at low frequencies to determine an appropriate input amplitude for the network analyzer measurements. We will also obtain a first estimate of the gains and these measurements can be used to do a sanity check on our network analyzer measurements later.</p>
<ul class="simple">
<li><p>Gain:</p>
<ul>
<li><p>Generate a <span class="math notranslate nohighlight">\(1KHz\)</span> <span class="math notranslate nohighlight">\(200mV_{pp}\)</span> sinewave with a <span class="math notranslate nohighlight">\(1.25V\)</span> DC offset with <em>W1</em> and connect it to the attenuator. <strong>Always disconnect the signal generator first and verify the signal on the oscilloscope before applying it to your circuit. Do not apply signals above <span class="math notranslate nohighlight">\(2.5V\)</span> or below <span class="math notranslate nohighlight">\(0V\)</span> to the chip</strong></p></li>
<li><p>Connect the attenuator output to the OTA input <em>in</em>.</p></li>
<li><p>Connect the oscilloscope channels <em>1+</em> and <em>2+</em> to <em>W1</em> and <em>out</em> respectively and ground <em>1-</em> and <em>2-</em>.</p></li>
<li><p>Measure the waveforms at input and output and record the amplitudes.</p>
<ul>
<li><p>Estimate the gain of the amplifier <span class="math notranslate nohighlight">\(A=\frac{V_{out,pp}}{V_{in,pp}} + A_{atten}\)</span>.</p></li>
</ul>
</li>
<li><p>Repeat with a <span class="math notranslate nohighlight">\(100mV_{pp}\)</span> and <span class="math notranslate nohighlight">\(500mV_{pp}\)</span> and check that the OTA operates in its linear range for an input of <span class="math notranslate nohighlight">\(50mV_{pp}\)</span>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="network-analyzer-measurements">
<h4>Network Analyzer Measurements<a class="headerlink" href="#network-analyzer-measurements" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Gain vs Frequency:</p>
<ul>
<li><p>Set up the Network Analyzer to use channel 1 as the reference and channel 2 as the output. Make sure to specify a signal with a 1.25V offset and <span class="math notranslate nohighlight">\(100mV\)</span> amplitude<a class="footnote-reference brackets" href="#na-amp" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. Turn on DC filtering at set the settling times to <span class="math notranslate nohighlight">\(40ms\)</span>. Ten periods and 10 averages typically give good results. <strong>Turn on the scope view during NA measurements to verify the correct operation of the amplifier</strong>. Adjust the NA settings if needed.</p></li>
<li><p>Measure the <span class="math notranslate nohighlight">\(A=\frac{V_{out}}{V_{in}} + A_{atten}\)</span> between <span class="math notranslate nohighlight">\(100Hz\)</span> and <span class="math notranslate nohighlight">\(1MHz\)</span> using e.g. 200 points.</p>
<ul>
<li><p>Can you determine the open-loop, LF gain of the two-stage OTA? What is an appropriate frequency to measure it?</p></li>
<li><p>Can you determine the frequency <span class="math notranslate nohighlight">\(f_1\)</span> of the dominant pole of the two-stage OTA’s open-loop frequency response?</p></li>
<li><p>Does the two-stage OTA have higher-order poles?</p></li>
<li><p>Check the slope of the frequency response.</p></li>
<li><p>What is the unity-gain frequency <span class="math notranslate nohighlight">\(f_u\)</span> of the two-stage OTA in open loop? Remember to correct for the effect of the input attenuator</p></li>
<li><p>Explain why you are measuring the open-loop performance of the OTA even though there is a feedback network around the OTA.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="measurement-vs-behavioral-model-predictions">
<h4>Measurement vs. Behavioral-Model Predictions<a class="headerlink" href="#measurement-vs-behavioral-model-predictions" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Compare the measured frequency response of the two-stage OTA to the response you expected based on the behavioral model of the one-stage OTA and common-source amplifier measured in <a class="reference internal" href="../Lab_5_simple_OTA_and_CS/simple_OTA_CS_PK.html"><span class="std std-doc">One Stage OTA and Common-Source Amplifier Lab</span></a>.</p></li>
</ul>
</section>
<section id="step-response-measurements">
<h4>Step Response Measurements<a class="headerlink" href="#step-response-measurements" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Place the amplifier in unity-gain feedback. Directly <em>out</em> (pin 31) to <em>inp</em> (pin 56) of the one-stage OTA without any resistors or capacitors.</p></li>
<li><p>Generate a <span class="math notranslate nohighlight">\(5kHz\)</span> <span class="math notranslate nohighlight">\(100mV_{pp}\)</span> square wave with a <span class="math notranslate nohighlight">\(1.25V\)</span> offset. Connect <em>in</em> directly to the signal generator <em>W1</em> without the attenuator.</p></li>
<li><p>Connect the oscilloscope channels <em>1+</em> and <em>2+</em> to <em>W1</em> and <em>out</em> respectively and ground <em>1-</em> and <em>2-</em>.</p></li>
<li><p>Review the step response of the two-stage OTA.</p></li>
</ul>
</section>
</section>
<section id="two-stage-pmos-input-ota-with-dominant-pole-compensation">
<h3>Two-Stage pMOS-input OTA with Dominant-Pole Compensation<a class="headerlink" href="#two-stage-pmos-input-ota-with-dominant-pole-compensation" title="Link to this heading">#</a></h3>
<section id="calculations">
<h4>Calculations<a class="headerlink" href="#calculations" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Calculate the value of <span class="math notranslate nohighlight">\(C_{L1}\)</span> to do dominant pole compensation. Your goal is to make the unity-gain frequency of the loop-gain for a unity-gain feedback application equal to the frequency of the non-dominant pole created by the second stage and <span class="math notranslate nohighlight">\(C_{L2}\)</span>.</p></li>
<li><p>Insert the new <span class="math notranslate nohighlight">\(C_{L1}\)</span> in the circuit.</p></li>
</ul>
</section>
<section id="id3">
<h4>Network Analyzer Measurements<a class="headerlink" href="#id3" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Put the two-stage OTA in the test circuit in <a class="reference internal" href="#fig-ota-open-loop-setup"><span class="std std-numref">Fig. 3.11</span></a> and measure the open-loop transfer function of the OTA. Remember to connect <em>W1</em> through the input attenuator.</p></li>
<li><p>Check the position of the dominant pole and non-dominant pole. Assuming a unity-gain application (<span class="math notranslate nohighlight">\(\beta=1\)</span>), find the unity-gain frequency and the phase margin.</p></li>
<li><p>Do the measurements correspond to your calculations? Carefully review the magnitude and phase response of the open-loop gain.</p></li>
<li><p>Can you determine if there are additional poles or zeros in the circuit?</p></li>
</ul>
</section>
<section id="id4">
<h4>Step Response Measurements<a class="headerlink" href="#id4" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Put the two-stage OTA in unity-gain again and measure the step response.</p></li>
<li><p>Compare step responses with different input amplitudes<a class="footnote-reference brackets" href="#step-setup" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>. Is the amplifier responding linearly?</p></li>
</ul>
</section>
</section>
<section id="two-stage-pmos-input-ota-with-miller-compensation">
<h3>Two-Stage pMOS-input OTA with Miller Compensation<a class="headerlink" href="#two-stage-pmos-input-ota-with-miller-compensation" title="Link to this heading">#</a></h3>
<section id="id6">
<h4>Calculations<a class="headerlink" href="#id6" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Replace <span class="math notranslate nohighlight">\(C_{L1}\)</span> with its original value of <span class="math notranslate nohighlight">\(470pF\)</span>.</p></li>
<li><p>Calculate the value of the required Miller compensation capacitor <span class="math notranslate nohighlight">\(C_M\)</span> to obtain a phase margin of about <span class="math notranslate nohighlight">\(45^o\)</span> in a unity-gain (<span class="math notranslate nohighlight">\(\beta = 1\)</span>) application, i.e. <span class="math notranslate nohighlight">\(f_{u,new} = f_{2,new}\)</span></p></li>
<li><p>Connect <span class="math notranslate nohighlight">\(C_M\)</span> between <em>OTAout</em> and <em>out</em> in the circuit.</p></li>
</ul>
</section>
<section id="id7">
<h4>Network Analyzer Measurements<a class="headerlink" href="#id7" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Put the two-stage OTA in the test circuit in <a class="reference internal" href="#fig-ota-open-loop-setup"><span class="std std-numref">Fig. 3.11</span></a> and measure the open-loop transfer function of the OTA. Remember to connect <em>W1</em> through the input attenuator.</p></li>
<li><p>Check the position of the dominant pole and non-dominant pole. Assuming a unity-gain application (<span class="math notranslate nohighlight">\(\beta=1\)</span>), find the unity-gain frequency and the phase margin.</p></li>
<li><p>Do the measurements correspond to your calculations? Carefully review the magnitude and phase response of the open-loop gain.</p></li>
<li><p>Can you determine if there are additional poles or zeros in the circuit?</p></li>
</ul>
</section>
<section id="id8">
<h4>Step Response Measurements<a class="headerlink" href="#id8" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Put the two-stage OTA in unity-gain again and measure the step response.</p></li>
<li><p>Measure step responses with different input amplitudes<a class="footnote-reference brackets" href="#step-setup" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>. Is the amplifier responding linearly?</p></li>
</ul>
</section>
<section id="rhp-zero-compensation">
<h4>RHP Zero Compensation<a class="headerlink" href="#rhp-zero-compensation" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Determine if you need to do compensation of the right-half plane zero due to <span class="math notranslate nohighlight">\(C_M\)</span> with a series resistor <span class="math notranslate nohighlight">\(R_M\)</span>.</p></li>
<li><p>If yes, determine an appropriate value for <span class="math notranslate nohighlight">\(R_M\)</span> and insert it in the circuit.</p></li>
<li><p>Repeat the network analyzer measurements of the open-loop transfer function.</p></li>
<li><p>Repeat the measurement of the step responses.</p></li>
<li><p>Discuss the impact of placing the series resistor.</p></li>
</ul>
</section>
</section>
<section id="dominant-pole-vs-miller-compensation">
<h3>Dominant-Pole vs Miller Compensation<a class="headerlink" href="#dominant-pole-vs-miller-compensation" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Compare the amplifier’s performance as a unity-gain buffer when using dominant-pole vs Miller compensation.</p></li>
</ul>
</section>
</section>
<section id="suggestions">
<h2>Suggestions<a class="headerlink" href="#suggestions" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Run simulations of the experiments to gain insight in the circuit behavior. Note that simulations, measurements and calculations can differ due to the presence of parasitic capacitors on the chip and breadboard. However, we are using large capacitors in these experiments so that the effect of parasitic capacitors should be minimal.</p></li>
<li><p>Double the bias current on the one-stage OTA and the CS amplifier and observe the change in performance.</p></li>
<li><p>Try different compensation capacitor values to obtain higher phase margins and review the frequency response and step response.</p></li>
</ul>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="scoper" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Remember that the oscilloscope input has a <span class="math notranslate nohighlight">\(1M\Omega\)</span> and <span class="math notranslate nohighlight">\(20pF\)</span> impedance which can affect the circuit operation.</p>
</aside>
<aside class="footnote brackets" id="na-amp" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Note that the network analyzer function in Scopy specifies the signal in amplitude in Vpeak whereas the signal generator function specifies the amplitude in Vpeak-to-peak. For the network analyzer measurements you typically want to use as large an input signal as possible to get a better dynamic range for the measurements. However, you need to keep the amplifier in its linear operating range. Hence our initial experiments using the oscilloscope to determine an appropriate input signal amplitude.</p>
</aside>
<aside class="footnote brackets" id="step-setup" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id5">1</a>,<a role="doc-backlink" href="#id9">2</a>)</span>
<p>The waveform generator in Scopy let’s you specify the peak-to-peak amplitude and DC offset for a square wave. If you want to generate steps with the same baseline but increasing amplitude, you have to adjust <em>both</em> amplitude and offset. E.g. a <span class="math notranslate nohighlight">\(100mV\)</span> step from <span class="math notranslate nohighlight">\(1.25V\)</span> to <span class="math notranslate nohighlight">\(1.35V\)</span> has an amplitude of <span class="math notranslate nohighlight">\(100mV_{pp}\)</span> and an offset of <span class="math notranslate nohighlight">\(1.3V\)</span>; a <span class="math notranslate nohighlight">\(200mV\)</span> step from <span class="math notranslate nohighlight">\(1.25V\)</span> to <span class="math notranslate nohighlight">\(1.45V\)</span> has an amplitude of <span class="math notranslate nohighlight">\(200mV_{pp}\)</span> and an offset of <span class="math notranslate nohighlight">\(1.35V\)</span>.</p>
</aside>
</aside>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./3a_experiments/Lab_6_compensation_two_stage_OTA"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../Lab_5_simple_OTA_and_CS/simple_OTA_CS_PK.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">3.1.5. </span>Lab 5: One-stage OTA and Common-Source Amplifier</p>
      </div>
    </a>
    <a class="right-next"
       href="../solutions.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">3.2. </span>Solutions</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objective">Objective</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preparation">Preparation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#materials">Materials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#experiments">Experiments</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#two-stage-pmos-input-ota-without-compensation">Two-Stage pMOS-input OTA without Compensation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#build-the-test-circuit-and-check-the-bias-point">Build the Test Circuit and Check the Bias Point</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#build-and-characterize-an-input-signal-attenuator">Build and Characterize an Input-Signal Attenuator</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#oscilloscope-measurements">Oscilloscope Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#network-analyzer-measurements">Network Analyzer Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#measurement-vs-behavioral-model-predictions">Measurement vs. Behavioral-Model Predictions</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-response-measurements">Step Response Measurements</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#two-stage-pmos-input-ota-with-dominant-pole-compensation">Two-Stage pMOS-input OTA with Dominant-Pole Compensation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations">Calculations</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Network Analyzer Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Step Response Measurements</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#two-stage-pmos-input-ota-with-miller-compensation">Two-Stage pMOS-input OTA with Miller Compensation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Calculations</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Network Analyzer Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Step Response Measurements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#rhp-zero-compensation">RHP Zero Compensation</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dominant-pole-vs-miller-compensation">Dominant-Pole vs Miller Compensation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#suggestions">Suggestions</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The MOSbius Crew
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>