
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.2. Ring Oscillator Experiments &#8212; MOSbius Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '2_chapter_ring_oscillator/ring_oscillator';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.3. Operational Transconductance Amplifier Experiments" href="../3_chapter_ota/ota_experiments.html" />
    <link rel="prev" title="2.1. First Experiment: Blinky" href="../2_chapter_blinky/blinky.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../0_front_matter/intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/die.png" class="logo__image only-light" alt="MOSbius Book - Home"/>
    <script>document.write(`<img src="../_static/die.png" class="logo__image only-dark" alt="MOSbius Book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../0_front_matter/intro.html">
                    Welcome to the MOSbius Project
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../1_chapter_description/description.html">1. MOSbius Platform for MOS Circuit Labs</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../4_chapter_demonstrations/demonstrations.html">2. Demonstrations with the MOSbius Chip</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../2_chapter_blinky/blinky.html">2.1. First Experiment: Blinky</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">2.2. Ring Oscillator Experiments</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../3_chapter_ota/ota_experiments.html">2.3. Operational Transconductance Amplifier Experiments</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../3_chapter_ota/mota-se-p-16/mota-se-p-16.html">2.3.1. Two-Stage Miller-Compensated OTA with pMOS Input Stage</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../6_iv_characteristics/iv_characteristics.html">2.4. Transistor I-V Characteristics</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../6_iv_characteristics/plotting_i_v_data_sims_nmos.html">Plotting nMOS I-V Data and Simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6_iv_characteristics/plotting_i_v_data_sims_pmos.html">Plotting pMOS I-V Data and Simulations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../6a_experiments/experiments.html">3. Lab Experiments Manual</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../6a_experiments/labs.html">3.1. Labs</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../6a_experiments/Lab_1_introduction/introduction_PK.html">3.1.1. Lab 1: Basic Measurements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6a_experiments/Lab_2_current_mirrors/current_mirrors_PK.html">3.1.2. Lab 2: Current Mirrors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6a_experiments/Lab_3_differential_pair_DC/differential_pair_DC_PK.html">3.1.3. Lab 3: Differential Pair DC Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6a_experiments/Lab_4_differential_pair_AC/differential_pair_AC_PK.html">3.1.4. Lab 4: Differential Pair AC Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6a_experiments/Lab_5_simple_OTA_and_CS/simple_OTA_CS_PK.html">3.1.5. Lab 5: One-stage OTA and Common-Source Amplifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6a_experiments/Lab_6_compensation_two_stage_OTA/two_stage_OTA_PK.html">3.1.6. Lab 6: Frequency Compensation of a Two-Stage OTA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../6a_experiments/solutions.html">3.2. Solutions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../5_sw_support/MOSbiusTools.html">4. Programming the Chip Using the MOSBiusTools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_chapter_simulations/LTspice_simulations.html">5. Spice Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ordering/ordering.html">6. How to Order a MOSbius</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mosbius_crew/mosbius_crew.html">7. The MOSbius Crew</a></li>
<li class="toctree-l1"><a class="reference internal" href="../9_back_matter/acknowledgments.html">8. Acknowledgments</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../appendices/appendices.html">9. Appendices</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../app_pcb_test/pcb_test.html">9.1. Testing Your MOSbius PCB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../8_chapter_chip_design_details/chip_design_details.html">9.2. MOSbius Chip Design Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app_adalm2000/adalm2000.html">9.3. ADALM2000 Notes</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/peterkinget/MOSbiusBook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/peterkinget/MOSbiusBook/issues/new?title=Issue%20on%20page%20%2F2_chapter_ring_oscillator/ring_oscillator.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/2_chapter_ring_oscillator/ring_oscillator.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Ring Oscillator Experiments</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manual-connections">2.2.1. Manual Connections</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#three-stage-ring-oscillator">Three-Stage Ring Oscillator</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#measurements">Measurements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connections-using-the-on-chip-switch-matrix">2.2.2. Connections Using the On-Chip Switch Matrix</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Three-Stage Ring Oscillator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#three-stage-ring-oscillator-studying-the-loop">Three-Stage Ring Oscillator - Studying the Loop</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dc-transfer-characteristic">DC Transfer Characteristic</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#delay-measurement-vs-oscillation-frequency">Delay Measurement vs Oscillation Frequency</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seven-stage-ring-oscillator">Seven-Stage Ring Oscillator</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ring-oscillator-experiments">
<h1><span class="section-number">2.2. </span>Ring Oscillator Experiments<a class="headerlink" href="#ring-oscillator-experiments" title="Link to this heading">#</a></h1>
<section id="manual-connections">
<h2><span class="section-number">2.2.1. </span>Manual Connections<a class="headerlink" href="#manual-connections" title="Link to this heading">#</a></h2>
<p>We start with an experiment with <em>manual</em> connections. The inverter stages and transistor are connected with wires on the breadboard. The on-chip switch matrix is left <em>disabled</em>.</p>
<section id="three-stage-ring-oscillator">
<h3>Three-Stage Ring Oscillator<a class="headerlink" href="#three-stage-ring-oscillator" title="Link to this heading">#</a></h3>
<figure class="align-default" id="id3">
<img alt="../_images/3stage_RO_manual_setup.jpeg" src="../_images/3stage_RO_manual_setup.jpeg" />
<figcaption>
<p><span class="caption-number">Fig. 2.7 </span><span class="caption-text">Mobius chip wired with external connections to build a 3-stage 16-16-1 ring oscillator; each node is using a different color wire; in the lower left corner is the ADALM 2000 that provides power and oscilloscope measurements.</span><a class="headerlink" href="#id3" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p><code class="docutils literal notranslate"><span class="pre">&lt;TBD</span> <span class="pre">Schematic</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">circuit&gt;</span></code></p>
<p><strong>Circuit Topology</strong></p>
<ul class="simple">
<li><p>we use the two 16x inverter pairs for <em>stages 1</em> and <em>2</em>, and a 1x nMOS and a 1x pMOS as <em>stage 3</em></p></li>
<li><p>we make the following connections on the breadboard:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">stage1_in</span></code> 52 &amp; 53 &amp; 40 &amp; 12;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stage2_in</span></code> 51 &amp; 50 &amp; 48;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stage3_in</span></code> 49 &amp; 39 &amp; 13;</p></li>
<li><p>14 &amp; VDD; 38 &amp; VSS;</p></li>
</ul>
</li>
<li><p>on the ADALM we connect</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">V+</span></code> to the positive rail on the breadboard and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GND</span></code> to the negative rail on the breadboard;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1-</span></code> and <code class="docutils literal notranslate"><span class="pre">2-</span></code> to <code class="docutils literal notranslate"><span class="pre">GND</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1+</span></code> and <code class="docutils literal notranslate"><span class="pre">2+</span></code> are use to make measurements</p></li>
</ul>
</li>
<li><p>we power the chip with 2.5V and observe oscillation!!</p></li>
</ul>
<section id="measurements">
<h4>Measurements<a class="headerlink" href="#measurements" title="Link to this heading">#</a></h4>
<p>We place the <code class="docutils literal notranslate"><span class="pre">1+</span></code> oscilloscope on different nodes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1+</span></code> on <code class="docutils literal notranslate"><span class="pre">stage3_in</span></code> –&gt; 14.6MHz</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1+</span></code> on <code class="docutils literal notranslate"><span class="pre">stage2_in</span></code> –&gt; 13.2MHz</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1+</span></code> on <code class="docutils literal notranslate"><span class="pre">stage1_in</span></code> –&gt; 14.4MHz</p></li>
<li><p>Notes:</p>
<ul>
<li><p>I would have expected the frequency to decrease in this experiment; load on stage 2 is the lowest (1x), so the scope adds the least load; load on stage 1 is high (16x) but drive strength is high (16x); load on stage 3 is high (16x) and drive strength is low (1x); yet the frequency of the 3rd experiment is higher than the 2nd; note that the amplitude in the 3rd experiment is lower also.</p></li>
<li><p>The ADALM is sampling at its fastest speed (100Msps) and the measurements are a bit ‘jittery’ (I have not found (yet?) how to average measurements in Scopy).
<img alt="3stage_RO_meas1" src="../_images/3stage_RO_manual_meas1.png" />
<img alt="3stage_RO_meas2" src="../_images/3stage_RO_manual_meas2.png" />
<img alt="3stage_RO_meas3" src="../_images/3stage_RO_manual_meas3.png" /></p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
<section id="connections-using-the-on-chip-switch-matrix">
<h2><span class="section-number">2.2.2. </span>Connections Using the On-Chip Switch Matrix<a class="headerlink" href="#connections-using-the-on-chip-switch-matrix" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>Three-Stage Ring Oscillator<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>We build the 3-stage 16-16-8 ring-oscillator circuit shown in the following schematic. It uses the two 16x inverter stages and creates an 8x inverter stage by combining the pairs of 4x nMOS and pMOS transistors; we use <code class="docutils literal notranslate"><span class="pre">BUS9</span></code> for VSS and <code class="docutils literal notranslate"><span class="pre">BUS10</span></code> for VDD.
<img alt="3stage_RO_8x_schematic" src="../_images/3stage_RO_8x.png" /></p>
<p>First, we translate the schematic <code class="docutils literal notranslate"><span class="pre">cir</span></code> file to a connections json file or manually<a class="footnote-reference brackets" href="#stageconnections" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> create a <a class="reference download internal" download="" href="../_downloads/f4b5044828f5358d316dc7f05f2bb0a3/connections_3stage_RO_8x_vdd_10_vss_9.json"><span class="xref download myst">connections json file</span></a> that we then translate into a <a class="reference download internal" download="" href="../_downloads/8f9a87260924670769a82b94adc17525/3stage_RO_8x_vdd_10_vss_9.txt"><span class="xref download myst">bitstream</span></a> and <a class="reference download internal" download="" href="../_downloads/d80a932f04ac907a7716515c2253a795/3stage_RO_8x_vdd_10_vss_9_clk.txt"><span class="xref download myst">clock file</span></a>. We upload the bitstream into the MOSbius chip using the <code class="docutils literal notranslate"><span class="pre">Pattern</span> <span class="pre">Generator</span></code> function of the ADALM using channel 8 for the <em>CLK</em> and channel 9 for the <em>DATA</em>; we typically use <em>200kHz</em> for the frequency for <em>CLK</em> and <em>100kHz</em> for the frequency for <em>DATA</em>; during programming the <code class="docutils literal notranslate"><span class="pre">EN</span></code> needs to be LOW; we leave it floating so the internal pull-down will hold it LOW; and we also disconnect the <code class="docutils literal notranslate"><span class="pre">1+</span></code> and <code class="docutils literal notranslate"><span class="pre">2+</span></code> scope inputs.
<img alt="3stage_RO_ready_for_programming" src="../_images/3stage_RO_8x_ready_for_programming.jpeg" /></p>
<p>We then enable the connection matrix by asserting the <code class="docutils literal notranslate"><span class="pre">EN</span></code> signal. Notice that the red LED shows that the chip is powered and the orange LED shows the switch matrix is enabled.
<img alt="3stage_RO_ready_for_programming" src="../_images/3stage_RO_8x_in_operation.jpeg" /></p>
<p>We now measure the outputs of the various stages; <code class="docutils literal notranslate"><span class="pre">1-</span></code> and <code class="docutils literal notranslate"><span class="pre">2-</span></code> are connected to the VSS at the ADALM connector; <code class="docutils literal notranslate"><span class="pre">1+</span></code> is displayed in orange and <code class="docutils literal notranslate"><span class="pre">2+</span></code> is displayed in purple on the ADALM scope screen.
<img alt="3stage_RO_8x_stage_outputs" src="../_images/3stage_RO_8x_stage1o_stage2o.png" />
The output of stage1 (16x) (orange) and stage2 (16x) (purple) are almost rail to rail. The oscillator operates at 14.2MHz.
<img alt="3stage_RO_8x_stage_outputs" src="../_images/3stage_RO_8x_stage1o_stage3o.png" />
The output of stage3 (8x) (purple) has a smaller amplitude which is expected given its lower drive strength.
<img alt="3stage_RO_8x_stage_output_vss" src="../_images/3stage_RO_8x_vss_pin43_vdd_pin9.png" />
The frequency of operation is a bit high to make very clean measurements on a solderless breadboard. E.g., here we observe pin43, which is the source of the 8x nMOS transistors and should be VSS, and pin9, which is the VDD of the 8x pMOS transistors and should be VDD; but we clearly see the effect of packaging (bondwire inductances) and board parasitics (lack of a good ground plane). Note that the frequency of operation is now higher, 18.4MHz, since there is no loading on the stages by the oscilloscope.</p>
</section>
<section id="three-stage-ring-oscillator-studying-the-loop">
<h3>Three-Stage Ring Oscillator - Studying the Loop<a class="headerlink" href="#three-stage-ring-oscillator-studying-the-loop" title="Link to this heading">#</a></h3>
<p>Next, we open the loop by splitting BUS01 and disconnecting the third stage output from the first stage input (<a class="reference download internal" download="" href="../_downloads/21fea0939c993ed1cc43343272fb533b/connections_3stage_RO_8x_vdd_10_vss_9_open_loop.json"><span class="xref download myst">connections</span></a>, <a class="reference download internal" download="" href="../_downloads/5196b550f2580036d3a87e283e7407f9/3stage_RO_open_loop.txt"><span class="xref download myst">bitstream</span></a>, <a class="reference download internal" download="" href="../_downloads/1072f03d32c0bc6c3fdae99d4f4834a6/3stage_RO_open_loop_clk.txt"><span class="xref download myst">clk</span></a>).</p>
<section id="dc-transfer-characteristic">
<h4>DC Transfer Characteristic<a class="headerlink" href="#dc-transfer-characteristic" title="Link to this heading">#</a></h4>
<p>We now measure the DC transfer characteristics by applying a slow rail-to-rail triangle wave to the first stage input (BUS01) and measure the voltage at its output (BUS02), shown on the right; using the X-Y display function of the oscilloscope, we get the typical inverter transfer characteristic.
<img alt="DC Transfer Stage 1" src="../_images/3stage_RO_8x_vdd_10_vss_9_open_loop_4n7_dc_stage1i_stage1o.png" /></p>
<p>Measuring the output of stage 2 we obtain a non-inverting amplifier with more gain.
<img alt="DC Transfer Two Stages" src="../_images/3stage_RO_8x_vdd_10_vss_9_open_loop_4n7_dc_stage1i_stage2o.png" /></p>
<p>At the output of stage 3 we get an inverting amplifier with more gain.
<img alt="DC Transfer Three Stages" src="../_images/3stage_RO_8x_vdd_10_vss_9_open_loop_4n7_dc_stage1i_stage3o.png" /></p>
</section>
<section id="delay-measurement-vs-oscillation-frequency">
<h4>Delay Measurement vs Oscillation Frequency<a class="headerlink" href="#delay-measurement-vs-oscillation-frequency" title="Link to this heading">#</a></h4>
<p>Next, we load each of the stages with an external capacitive load of 4.7nF to VSS. Then, using a fast square-wave input we measure a delay between the input of the first stage and the output of the third stage of 1.08us, predicting a ring oscillator frequency of 462.9kHz.
<img alt="3stage Delay Measurement" src="../_images/3stage_RO_8x_vdd_10_vss_9_open_loop_4n7_delay_stage1i_stage3o.png" /></p>
<p>We can then close the ring oscillator loop with an external connection and observe the oscillation frequency of 436.7kHz, which is about 7% less than predicted based on the delay measurement.
<img alt="3stage External Loop" src="../_images/3stage_RO_8x_vdd_10_vss_9_ext_loop_4n7_stage1o_stage3o.png" /></p>
<p>One can now experiment with different loading capacitors and study the relationship between the load and the frequency. Note that when using large load capacitors, we noticed that the oscillator configuration with an internal connection between the output of stage 3 and the input of stage 1, did not behave as expected. However, when closing the loop externally on the breadboard, the operation was as expected. This is likely due to the different effect of various parasitics like bondwires, PCB wires, etc. which get ‘bypassed’ when using on-chip connections.</p>
</section>
</section>
<section id="seven-stage-ring-oscillator">
<h3>Seven-Stage Ring Oscillator<a class="headerlink" href="#seven-stage-ring-oscillator" title="Link to this heading">#</a></h3>
<p>The schematic for the 7-stage ring oscillator is shown in the following figure. It uses a large number of the transistors available. The associated <a class="reference download internal" download="" href="../_downloads/970dba10df371fc30443c29200d59cde/7stage_RO_bitstream.txt"><span class="xref download myst">bitstream</span></a> and <a class="reference download internal" download="" href="../_downloads/4ee7de18ebfdd85f6889cddee7bf2554/7stage_RO_bitstream_clk.txt"><span class="xref download myst">clock file</span></a> are generated and loaded into the chip as described above. Note that due to the presence of the jumper BUS08 is renamed to BUS01 in the netlist.
<img alt="7stage_RO_schematic" src="../_images/7stage_RO_schematic.png" /></p>
<p>The output of stage 7 (BUS01) and stage 6 (BUS07) is connected to the ADALM oscilloscope <code class="docutils literal notranslate"><span class="pre">1+</span></code> (yellow wire/orange trace) and <code class="docutils literal notranslate"><span class="pre">2+</span></code> (blue wire/purple trace), respectively, and the inputs of stage 1 through 7 are connected to <code class="docutils literal notranslate"><span class="pre">DIO1</span></code> through <code class="docutils literal notranslate"><span class="pre">DIO7</span></code> on the ADALM.
<img alt="7stage_RO_protoboard" src="../_images/7stage_RO_protoboard.jpeg" /></p>
<p>The following mixed-mode measurements are obtained. The frequency is 2.14MHz. It is instructive to review the delays from stage to stage and correlate it with the sizing and loading of each stage. Note that the logic signals are captured with a 100Msps logic analyzer (i.e. with a 10ns resolution). The measurement is triggered by the oscilloscope waveform on <code class="docutils literal notranslate"><span class="pre">1+</span></code>.
<img alt="7stage_RO_meas" src="../_images/7stage_RO_mixed_signal_meas.png" /></p>
<p>When adding 4.7nF capacitors to VSS on all the outputs, the frequency goes down to 105.6kHz
<img alt="7stage_RO_meas2" src="../_images/7stage_RO_mixed_signal_meas_4n7.png" /></p>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="stageconnections" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p>Note that in the manual connections json file and the corresponding bitsteam file provided here the input of the first stage is connected to BUS03, the input of the second stage to BUS04, and the input of the third stage to BUS05, while VSS and VDD are connected to BUS09 and BUS10 respectively. This is different from the schematic shown, but does not really make a difference for the operation of the circuit.</p>
</aside>
</aside>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./2_chapter_ring_oscillator"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../2_chapter_blinky/blinky.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">2.1. </span>First Experiment: Blinky</p>
      </div>
    </a>
    <a class="right-next"
       href="../3_chapter_ota/ota_experiments.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2.3. </span>Operational Transconductance Amplifier Experiments</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manual-connections">2.2.1. Manual Connections</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#three-stage-ring-oscillator">Three-Stage Ring Oscillator</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#measurements">Measurements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connections-using-the-on-chip-switch-matrix">2.2.2. Connections Using the On-Chip Switch Matrix</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Three-Stage Ring Oscillator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#three-stage-ring-oscillator-studying-the-loop">Three-Stage Ring Oscillator - Studying the Loop</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dc-transfer-characteristic">DC Transfer Characteristic</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#delay-measurement-vs-oscillation-frequency">Delay Measurement vs Oscillation Frequency</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#seven-stage-ring-oscillator">Seven-Stage Ring Oscillator</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The MOSbius Crew
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>